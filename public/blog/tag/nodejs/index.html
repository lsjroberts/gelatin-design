<html lang="en">
    <head>
        <meta charset="UTF-8">
        
            <title>Posts tagged &#39;nodejs&#39; | gelatindesign</title>
        

        <link rel="shortcut icon" href="/assets/images/icon.png">

        <link media="all" type="text/css" rel="stylesheet" href="/assets/styles/master.css">

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-18813637-1', 'gelatindesign.co.uk');
            ga('send', 'pageview');

        </script>

        <script src="/assets/scripts/d3.v3.min.js" charset="utf-8"></script>
        <script src="/assets/scripts/nv.d3.min.js" charset="utf-8"></script>
    </head>
    <body>
        
            
        

        <a href="/"><img class="header" src="/assets/images/logo-header.png" alt="Posts tagged &#39;nodejs&#39;"></a>

        <div id="site-content">
            
    
    <article class="page">
        <header>
            <h1>Posts tagged &#39;nodejs&#39;</h1>
        </header>

        
    </article>


    <section class="post-list">
        
            <article class="post">
    <header>
        <h1><a href="/blog/post/creating-a-blog-with-metalsmith">Creating a blog with Metalsmith</a></h1>

        <span class="date">24th May, 2014</span>
    </header>

    <p>I&#39;ve been looking at converting this site to use a static-site generator. Prior to this I&#39;ve been using a simple custom blog on top of Laravel. As much as I love Laravel, it seems a touch pointless to have all this dynamic code behind what is just static content pages.</p>
<p>With that in mind I had a look around at what the available options were. Jekyll seemed like a good choice and I began working on porting my content to it. However I wasn&#39;t particuarly sold, not sure why I just didn&#39;t feel happy using it. I wanted more control and to organise my files how I wanted.</p>
<p>Yesterday I saw a retweet about <a href="http://metalsmith.io">Metalsmith</a> which looked very similar to <a href="/blog/post/easily-build-assets-with-gulpjs">Gulpjs which I am already a big fan of</a>. I started a few hours ago writing my build script and porting my content and now not long later it&#39;s all done.</p>
<p>I did have to do some work to get things how I wanted. Metalsmith is very hands-off so if you want list pages, pagination, tag pages etc you will have to write these yourself.</p>
<p>Fortunately it&#39;s dead simple to do. Plugins are easy to write and you can just manipulate the files being generated. So for example a tagging plugin could be written as so:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> metalsmith  = require(<span class="hljs-string">'metalsmith'</span>),
    collections = require(<span class="hljs-string">'metalsmith-collections'</span>);

metalsmith(__dirname)

    <span class="hljs-comment">// group together all files in the `/blog/` directory as posts</span>
    .<span class="hljs-keyword">use</span>(collections({
        posts: {
            pattern: <span class="hljs-string">'blog/*'</span>,
            sortBy: <span class="hljs-string">'date'</span>,
            reverse: <span class="hljs-literal">true</span>,
        }
    }))

    <span class="hljs-comment">// generate the tag listing pages</span>
    .<span class="hljs-keyword">use</span>(blogTagLists)

    <span class="hljs-comment">// build</span>
    .build(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> </span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blogTagLists</span><span class="hljs-params">(files, metalsmith, done)</span> </span>{
    <span class="hljs-keyword">var</span> tags = {};

    <span class="hljs-comment">// loop the posts collection, creating new groups on the tags</span>
    <span class="hljs-keyword">for</span> (p <span class="hljs-keyword">in</span> metalsmith.data.posts) {
        <span class="hljs-keyword">for</span> (t <span class="hljs-keyword">in</span> metalsmith.data.posts[p].tags) {
            tag = metalsmith.data.posts[p].tags[t];
            <span class="hljs-keyword">if</span> (! tags[tag]) {
                tags[tag] = [];
            }

            tags[tag].push(metalsmith.data.posts[p]);
        }
    }

    <span class="hljs-comment">// loop the tags and create a new index file for each tag</span>
    <span class="hljs-keyword">for</span> (tag <span class="hljs-keyword">in</span> tags) {
        files[<span class="hljs-string">'blog/tag/'</span> + tag + <span class="hljs-string">'/index.md'</span>] = {
            template: <span class="hljs-string">'list.html'</span>,
            mode: <span class="hljs-string">'0644'</span>,
            contents: <span class="hljs-string">''</span>,
            title: <span class="hljs-string">"Posts tagged '"</span> + tag + <span class="hljs-string">"'"</span>,
            posts: tags[tag],
        }
    }

    done();
}
</code></pre>
<p>You can see my full <a href="http://github.com/lsjroberts/gelatin-design/tree/master/build.js">build.js file here</a> along with the rest of the code for this site.</p>
<p>If you&#39;re looking for a static-site generator which gives you a lot of control then I really recommend <a href="http://metalsmith.io">Metalsmith</a>.</p>
<hr>
<p>What are your thoughts on Metalsmith? Do you prefer Jekyll or another static-site generator? Leave your comments below.</p>


    <footer>
        <nav class="tags">
            
                <a class="tag tag-coding" href="/blog/tag/coding">coding</a></li>
            
                <a class="tag tag-javascript" href="/blog/tag/javascript">javascript</a></li>
            
                <a class="tag tag-nodejs" href="/blog/tag/nodejs">nodejs</a></li>
            
                <a class="tag tag-metalsmith" href="/blog/tag/metalsmith">metalsmith</a></li>
            
                <a class="tag tag-jekyll" href="/blog/tag/jekyll">jekyll</a></li>
            
        </nav>

        <a class="comments-link" href="/blog/post/creating-a-blog-with-metalsmith#comments">Comments</a>
    </footer>
</article>
        
    </section>

    <nav class="pagination-wrapper">
    <ul class="pagination">
        
    </ul>
</nav>

        </div>
    </body>
</html>
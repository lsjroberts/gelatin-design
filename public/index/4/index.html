<html lang="en">
    <head>
        <meta charset="UTF-8">
        
            <title>Page 4 of 5 | gelatindesign</title>
        

        <link rel="shortcut icon" href="/assets/images/icon.png">

        <link media="all" type="text/css" rel="stylesheet" href="/assets/styles/master.css">

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-18813637-1', 'gelatindesign.co.uk');
            ga('send', 'pageview');

        </script>
    </head>
    <body>
        
            
        

        <a href="/"><img class="header" src="/assets/images/logo-header.png" alt="Page 4 of 5"></a>

        <div id="site-content">
            
    
    <article class="page">
        <header>
            <h1>Page 4 of 5</h1>
        </header>

        
    </article>


    <section class="post-list">
        
            <article class="post">
    <header>
        <h1><a href="/blog/post/clean-your-html-with-jade">Clean your HTML with Jade</a></h1>

        <span class="date">16th February, 2014</span>
    </header>

    <p>As fundamental as html is to the web it is a bit of an ugly character. Angular brackets are a particular eyesore.</p>
<p><a href="http://jade-lang.com">Jade</a> is a terse almost python-like html templating language. It is primarily a nodejs package, but there are compilers for <a href="http://stackoverflow.com/questions/13355137/php-jade-template-parser">PHP</a> and other languages as well.</p>
<!-- more -->

<p>It has a wonderfully basic syntax:</p>
<pre><code class="lang-jade">doctype html
html
    head
        title Hello World
        link(<span class="hljs-built_in">rel</span>=<span class="hljs-string">"stylesheet"</span>, href=<span class="hljs-string">"build/styles/combined.css"</span>)
    body
        <span class="hljs-operator">div</span>.container
            p Hello World
</code></pre>
<h2 id="layouts-and-blocks">Layouts and blocks</h2>
<p>Jade allows you to create layouts and extend them for your different views:</p>
<pre><code class="lang-jade"><span class="hljs-comment">// layouts/master.jade</span>
body
    <span class="hljs-keyword">block</span> content
<span class="hljs-comment">{% endhighlight %}</span>

<span class="hljs-comment">{% highlight jade %}</span>
<span class="hljs-comment">// index.jade</span>
extends layouts/master

<span class="hljs-keyword">block</span> content
    header.hero
        h1 Hello World
</code></pre>
<h2 id="use-mixins-to-power-your-views">Use mixins to power your views</h2>
<p>Forms are probably the lamest thing to write in HTML, it can become a bore rather quickly. Using jade mixins you can speed this process up and cleanly define your form without all the verbosity.</p>
<pre><code class="lang-jade"><span class="hljs-comment">// mixins/form.jade</span>
mixin form(action, <span class="hljs-function"><span class="hljs-keyword">method</span>)
    <span class="hljs-title">unless</span> <span class="hljs-title">method</span>
        - <span class="hljs-title">method</span>= "<span class="hljs-title">get</span>"
    <span class="hljs-title">form</span><span class="hljs-params">(action= action, <span class="hljs-keyword">method</span>= <span class="hljs-keyword">method</span>)</span>
        <span class="hljs-title">if</span> <span class="hljs-title">block</span>
            <span class="hljs-title">block</span>
        <span class="hljs-title">else</span>
            <span class="hljs-title">p</span> <span class="hljs-title">Looks</span> <span class="hljs-title">like</span> <span class="hljs-title">you</span> <span class="hljs-title">forgot</span> <span class="hljs-title">to</span> <span class="hljs-title">add</span> <span class="hljs-title">any</span> <span class="hljs-title">inputs</span> <span class="hljs-title">to</span> <span class="hljs-title">your</span> <span class="hljs-title">form</span>

<span class="hljs-title">mixin</span> <span class="hljs-title">field</span><span class="hljs-params">(name, <span class="hljs-keyword">type</span>)</span>
    <span class="hljs-title">label</span>= <span class="hljs-title">name</span>
    <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">type</span>= <span class="hljs-keyword">type</span>, name= name)</span></span>
</code></pre>
<pre><code class="lang-jade"><span class="hljs-comment">// login.jade</span>

<span class="hljs-keyword">include</span> mixins/form

+form(<span class="hljs-string">"auth/login"</span>, <span class="hljs-string">"post"</span>)
    +field(<span class="hljs-string">"email"</span>, <span class="hljs-string">"text"</span>)
    +field(<span class="hljs-string">"password"</span>, <span class="hljs-string">"password"</span>)
</code></pre>
<p>So that&#39;s pretty cool, but there&#39;s a lot more you can do with the field mixin. You can run any javascript inside jade, so we can add an <code>unslugify</code> function to convert &quot;email_address&quot; to &quot;Email Address&quot;. Then add in some input type guessing and we&#39;ve got something pretty useful really quickly.</p>
<pre><code class="lang-jade"><span class="hljs-comment">// mixins/form.jade</span>

<span class="hljs-comment">//- ...</span>

mixin field(name, <span class="hljs-class"><span class="hljs-keyword">type</span>)</span>
    <span class="hljs-comment">//- Convert "foo_bar" to "Foo Bar"</span>
    -var unslugify = <span class="hljs-keyword">function</span>(input) {
    -   <span class="hljs-keyword">return</span> input.charAt(<span class="hljs-number">0</span>).toUpperCase() + input.slice(<span class="hljs-number">1</span>).toLowerCase().replace(/[-|_](.)/g, <span class="hljs-keyword">function</span>(<span class="hljs-keyword">match</span>, group1) {
    -       <span class="hljs-keyword">return</span> ' ' + group1.toUpperCase();
    -   });
    -}

    <span class="hljs-comment">//- If no type has been set, try to pick an appropriate one</span>
    unless <span class="hljs-class"><span class="hljs-keyword">type</span></span>
        case name
            <span class="hljs-keyword">when</span> <span class="hljs-string">"password"</span>
                - <span class="hljs-class"><span class="hljs-keyword">type</span>=</span> <span class="hljs-string">"password"</span>
            <span class="hljs-keyword">when</span> <span class="hljs-string">"password_confirmation"</span>
                - <span class="hljs-class"><span class="hljs-keyword">type</span>=</span> <span class="hljs-string">"password"</span>
            <span class="hljs-keyword">when</span> <span class="hljs-string">"email"</span>
                - <span class="hljs-class"><span class="hljs-keyword">type</span>=</span> <span class="hljs-string">"email"</span>
            <span class="hljs-keyword">default</span>
                - <span class="hljs-class"><span class="hljs-keyword">type</span>=</span> <span class="hljs-string">"text"</span>

    div.field
        label= unslugify(name)
        input(<span class="hljs-class"><span class="hljs-keyword">type</span>=</span> <span class="hljs-class"><span class="hljs-keyword">type</span>, <span class="hljs-title">name</span>=</span> name)
</code></pre>
<pre><code class="lang-jade"><span class="hljs-comment">// login.jade</span>

<span class="hljs-keyword">include</span> mixins/form

+form(<span class="hljs-string">"auth/login"</span>, <span class="hljs-string">"post"</span>)
    +field(<span class="hljs-string">"email"</span>)
    +field(<span class="hljs-string">"password"</span>)
</code></pre>
<h2 id="lovely">Lovely</h2>
<p>There&#39;s a few more things you can do in jade, <a href="http://jade-lang.com/reference/">check out the reference</a> to see all your options. But hopefully you can see from this quick rundown how much cleaner you can make your views.</p>
<p>Coding should be fun and jade brings that enjoyment back to html.</p>


    <footer>
        <nav class="tags">
            
                <a class="tag tag-javascript" href="/blog/tag/javascript">javascript</a></li>
            
                <a class="tag tag-node" href="/blog/tag/node">node</a></li>
            
                <a class="tag tag-jade" href="/blog/tag/jade">jade</a></li>
            
        </nav>

        <a class="comments-link" href="/blog/post/clean-your-html-with-jade#comments">Comments</a>
    </footer>
</article>
        
            <article class="post">
    <header>
        <h1><a href="/blog/post/easily-build-assets-with-gulpjs">Easily build assets with GulpJS</a></h1>

        <span class="date">15th February, 2014</span>
    </header>

    <p>I have spent so many hours trying to find the perfect build process for my less/sass stylesheets and coffeescripts. There are several php packages for this but I&#39;ve never been too happy with them and they often seem to fail for various and difficult to debug reasons.</p>
<p><a href="http://gulpjs.com">Gulpjs</a> is the answer to all your woes. It is a command-line tool that simply allows you to run build tasks.</p>
<!-- more -->

<h2 id="getting-started-with-gulp">Getting started with gulp</h2>
<p>Follow <a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md#getting-started">these instructions</a> to get gulp installed and running.</p>
<h3 id="plugins">Plugins</h3>
<p>There are numerous plugins available for gulp which provide all the functionality you could want.</p>
<p>You can install plugins through npm:</p>
<pre><code>npm install gulp<span class="hljs-attribute">-concat</span> gulp<span class="hljs-attribute">-coffee</span>
</code></pre><p>Then require them at the top of your <code>gulpfile.js</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> <span class="hljs-keyword">concat</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'gulp-concat'</span>);
<span class="hljs-keyword">var</span> coffee = <span class="hljs-keyword">require</span>(<span class="hljs-string">'gulp-coffee'</span>);
</code></pre>
<h3 id="writing-tasks">Writing tasks</h3>
<p>A good use case of gulp is compiling and combining coffeescripts in a single javascript file. So lets start with our first task:</p>
<pre><code class="lang-js">gulp.task(<span class="hljs-string">'coffeescripts'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'assets/scripts/**/*.coffee'</span>)
        .pipe(concat(<span class="hljs-string">'combined.coffee'</span>))
        .pipe(coffee())
        .pipe(gulp.dest(<span class="hljs-string">'build/scripts/combined.js'</span>));
});
</code></pre>
<p>This task finds all <code>.coffee</code> files in any folder within your scripts directory. These are combined into a single file then piped into a plugin that compiles coffeescripts into javascript and finally pushed into your build directory.</p>
<p>It is important to combine your coffeescripts before compiling them. This will ensure that all your classes are defined within a single <code>(function() { ... })();</code> block and can easily reference each other without having to resort to the global <code>window</code> object.</p>
<p>You can run this task with <code>gulp coffeescripts</code> in your terminal.</p>
<h2 id="task-dependancies">Task dependancies</h2>
<p>So now you&#39;ve got your coffeescripts compiling, you may have some vendor javascripts that you want to also be built into the <code>combined.js</code> file. If you pipe these into your <code>coffee()</code> plugin you&#39;ll get a bunch of errors. Instead it is best to have a separate task that only runs on <code>.js</code> files.</p>
<pre><code>gulp.task(<span class="hljs-string">'coffeescripts'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'assets/scripts/**/*.coffee'</span>)
        .pipe(concat(<span class="hljs-string">'combined-coffee.coffee'</span>))
        .pipe(coffee())
        .pipe(gulp.dest(<span class="hljs-string">'assets/scripts/'</span>));
});

gulp.task(<span class="hljs-string">'scripts'</span>, [<span class="hljs-string">'coffeescripts'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'assets/scripts/**/*.js'</span>)
        .pipe(concat(<span class="hljs-string">'combined.js'</span>))
        .pipe(uglify())
        .pipe(gulp.dest(<span class="hljs-string">'build/scripts'</span>));
});
</code></pre><p>By passing in <code>[&#39;coffeescripts&#39;]</code> to the <code>scripts</code> task you ensure it is run first. This compiles the coffeescripts into <code>combined-coffee.js</code> which is then combined with normal javascript files.</p>
<p>The uglify plugin minifies the scripts before they are piped into the build directory:</p>
<pre><code><span class="hljs-keyword">var</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-uglify'</span>)
</code></pre><p>Running <code>gulp scripts</code> will now run the coffeescripts and scripts tasks.</p>
<h2 id="watchers-and-automated-builds">Watchers and automated builds</h2>
<p>Having to run the gulp command every time you make a change to a file is a bit of a faff, this can be automated for you using watchers.</p>
<pre><code>gulp.task(<span class="hljs-string">'watch'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    gulp.watch([
        <span class="hljs-string">'assets/scripts/**/*.coffee'</span>,
        <span class="hljs-string">'assets/scripts/**/*.js'</span>
    ], [<span class="hljs-string">'scripts'</span>]);

    gulp.watch([
        <span class="hljs-string">'assets/styles/**/*.sass'</span>,
        <span class="hljs-string">'assets/styles/**/*.css'</span>
    ], [<span class="hljs-string">'styles'</span>]);
});
</code></pre><p>If any changes are made to one of the specified files, the related task will be run. You can start the watcher with:</p>
<pre><code>gulp watch
</code></pre><h2 id="taking-it-further">Taking it further</h2>
<p>There are <a href="http://gulpjs.com/plugins/">lot of existing plugins for gulp</a> and I&#39;d suggest taking some time to look through and see which ones might prove useful in your code environment.</p>
<p>This <a href="https://gist.github.com/lsjroberts/8810740">example build script</a> shows how I run my usual full build process, feel free it use it as you wish.</p>
<p>You may wish to install your dependancies through a <code>package.json</code> file and running <code>npm install</code> to ensure all your developers are working with the same node modules.</p>


    <footer>
        <nav class="tags">
            
                <a class="tag tag-javascript" href="/blog/tag/javascript">javascript</a></li>
            
                <a class="tag tag-gulpjs" href="/blog/tag/gulpjs">gulpjs</a></li>
            
        </nav>

        <a class="comments-link" href="/blog/post/easily-build-assets-with-gulpjs#comments">Comments</a>
    </footer>
</article>
        
    </section>

    <nav class="pagination-wrapper">
    <ul class="pagination">
        
            
            
            <li class=""><a href="/">1</a></li>
        
            
            
            <li class=""><a href="/index/2">2</a></li>
        
            
            
            <li class=""><a href="/index/3">3</a></li>
        
            
            
                
            
            <li class="active"><a href="/index/4">4</a></li>
        
            
            
            <li class=""><a href="/index/5">5</a></li>
        
    </ul>
</nav>

        </div>
    </body>
</html>